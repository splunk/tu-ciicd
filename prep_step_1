# Step 1
# Install and Setup Splunk Enterprise, Standalone Local, with Dev/Test License

# Whether you plan to build apps for Splunk Cloud Platform or Splunk Enterprise
# you need a local installation of Splunk Enterprise for your development environment. 
# With Splunk Enterprise you have access to the file system, but you don't have direct access to these files when using Splunk Cloud Platform.

# You must have an Enterprise or Dev/Test License, because we need to use the SHC Deployer capability, appinspect, and package-toolkit

> Install Splunk Enterprise localy as usual

# Step 1.1  
# https://dev.splunk.com/enterprise/tutorials/module_validate/packageapp/

#Download the Splunk Packaging Toolkit from Downloads.
#Install the .tar.gz file in the same development environment as your app files, which is on the same computer as Splunk Enterprise .... or pip

# Step 1.2
# From the command line, go to the $SPLUNK_HOME/etc/apps

# Create our first initializing AD-Hoc app here
# $SPLUNK_HOME/etc/apps/<appname>
#  TA-tu_amer_content

# Create our first initializing ES dev/stage/prod apps here.
# $SPLUNK_HOME/etc/apps/<appname>
# DA-ESS-security-content-10-dev
# DA-ESS-security-content-20-stage
# DA-ESS-security-content-30-prod

# Step 1.3 Validate and package the first app 
# https://dev.splunk.com/enterprise/tutorials/module_validate/packageapp#Validate-and-package-the-app
# in that link step 2,

chmod -R u+rw,g-rwx,o-rwx splunkuser
slim generate-manifest <appname> -o <appname>/app.manifest

#keep running manifest until everything is good, (should be)
slim validate <appname>
chmod -R u+rw,g-rwx,o-rwx <appname>

#https://dev.splunk.com/enterprise/docs/releaseapps/packageapps
COPYFILE_DISABLE=1 tar --format ustar -cvzf <appname>.tar.gz <appname_directory>
